{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LEVI\\\\Desktop\\\\Gestao-de-cobrancas\\\\src\\\\components\\\\clients\\\\ClientsPage.js\",\n  _s = $RefreshSig$();\n// src/components/clients/ClientsPage.js\nimport React, { useState } from 'react';\nimport ClientTable from './ClientTable';\nimport ClientModal from './ClientModal';\nimport SubscriptionModal from './SubscriptionModal';\nimport { clientService, subscriptionService } from '../../services/firestore';\nimport { MESSAGES } from '../../utils/constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ClientsPage = ({\n  clients,\n  setClients,\n  subscriptions,\n  setSubscriptions\n}) => {\n  _s();\n  const [isClientModalOpen, setIsClientModalOpen] = useState(false);\n  const [isSubModalOpen, setIsSubModalOpen] = useState(false);\n  const [selectedClient, setSelectedClient] = useState(null);\n  const [selectedSubscription, setSelectedSubscription] = useState(null);\n  const handleOpenClientModal = (client = null) => {\n    setSelectedClient(client);\n    setIsClientModalOpen(true);\n  };\n  const handleCloseClientModal = () => {\n    setSelectedClient(null);\n    setIsClientModalOpen(false);\n  };\n  const handleOpenSubModal = client => {\n    const existingSub = subscriptions.find(sub => sub.clientId === client.id);\n    setSelectedClient(client);\n    setSelectedSubscription(existingSub || null);\n    setIsSubModalOpen(true);\n  };\n  const handleCloseSubModal = () => {\n    setSelectedClient(null);\n    setSelectedSubscription(null);\n    setIsSubModalOpen(false);\n  };\n  const handleSaveClient = async clientData => {\n    if (selectedClient) {\n      // Update\n      const result = await clientService.update(selectedClient.id, clientData);\n      if (result.success) {\n        setClients(prev => prev.map(c => c.id === selectedClient.id ? {\n          ...c,\n          ...clientData\n        } : c));\n        alert(MESSAGES.SUCCESS.CLIENT_UPDATED);\n      }\n    } else {\n      // Create\n      const result = await clientService.create(clientData);\n      if (result.success) {\n        setClients(prev => [{\n          id: result.id,\n          ...clientData\n        }, ...prev]);\n        alert(MESSAGES.SUCCESS.CLIENT_CREATED);\n      }\n    }\n    handleCloseClientModal();\n  };\n  const handleDeleteClient = async clientId => {\n    if (window.confirm(MESSAGES.ERROR.DELETE_CONFIRMATION)) {\n      const result = await clientService.delete(clientId);\n      if (result.success) {\n        setClients(prev => prev.filter(c => c.id !== clientId));\n        alert(MESSAGES.SUCCESS.CLIENT_DELETED);\n      }\n    }\n  };\n  const handleSaveSubscription = async subData => {\n    if (selectedSubscription) {\n      // Update\n      const result = await subscriptionService.update(selectedSubscription.id, subData);\n      if (result.success) {\n        setSubscriptions(prev => prev.map(s => s.id === selectedSubscription.id ? {\n          ...s,\n          ...subData\n        } : s));\n      }\n    } else {\n      // Create\n      const result = await subscriptionService.create(subData);\n      if (result.success) {\n        setSubscriptions(prev => [{\n          id: result.id,\n          ...subData\n        }, ...prev]);\n      }\n    }\n    handleCloseSubModal();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-gray-800\",\n        children: \"Gerenciar Clientes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleOpenClientModal(),\n        className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",\n        children: \"Adicionar Cliente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ClientTable, {\n      clients: clients,\n      onEdit: handleOpenClientModal,\n      onDelete: handleDeleteClient,\n      onManageSubscription: handleOpenSubModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ClientModal, {\n      isOpen: isClientModalOpen,\n      onClose: handleCloseClientModal,\n      onSave: handleSaveClient,\n      client: selectedClient\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), selectedClient && /*#__PURE__*/_jsxDEV(SubscriptionModal, {\n      isOpen: isSubModalOpen,\n      onClose: handleCloseSubModal,\n      onSave: handleSaveSubscription,\n      subscription: selectedSubscription,\n      client: selectedClient\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(ClientsPage, \"hzPtqCjYfKiNwKkkMgmthPhKCcw=\");\n_c = ClientsPage;\nexport default ClientsPage;\nvar _c;\n$RefreshReg$(_c, \"ClientsPage\");","map":{"version":3,"names":["React","useState","ClientTable","ClientModal","SubscriptionModal","clientService","subscriptionService","MESSAGES","jsxDEV","_jsxDEV","ClientsPage","clients","setClients","subscriptions","setSubscriptions","_s","isClientModalOpen","setIsClientModalOpen","isSubModalOpen","setIsSubModalOpen","selectedClient","setSelectedClient","selectedSubscription","setSelectedSubscription","handleOpenClientModal","client","handleCloseClientModal","handleOpenSubModal","existingSub","find","sub","clientId","id","handleCloseSubModal","handleSaveClient","clientData","result","update","success","prev","map","c","alert","SUCCESS","CLIENT_UPDATED","create","CLIENT_CREATED","handleDeleteClient","window","confirm","ERROR","DELETE_CONFIRMATION","delete","filter","CLIENT_DELETED","handleSaveSubscription","subData","s","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onEdit","onDelete","onManageSubscription","isOpen","onClose","onSave","subscription","_c","$RefreshReg$"],"sources":["C:/Users/LEVI/Desktop/Gestao-de-cobrancas/src/components/clients/ClientsPage.js"],"sourcesContent":["// src/components/clients/ClientsPage.js\r\nimport React, { useState } from 'react';\r\nimport ClientTable from './ClientTable';\r\nimport ClientModal from './ClientModal';\r\nimport SubscriptionModal from './SubscriptionModal';\r\nimport { clientService, subscriptionService } from '../../services/firestore';\r\nimport { MESSAGES } from '../../utils/constants';\r\n\r\nconst ClientsPage = ({ clients, setClients, subscriptions, setSubscriptions }) => {\r\n  const [isClientModalOpen, setIsClientModalOpen] = useState(false);\r\n  const [isSubModalOpen, setIsSubModalOpen] = useState(false);\r\n  const [selectedClient, setSelectedClient] = useState(null);\r\n  const [selectedSubscription, setSelectedSubscription] = useState(null);\r\n\r\n  const handleOpenClientModal = (client = null) => {\r\n    setSelectedClient(client);\r\n    setIsClientModalOpen(true);\r\n  };\r\n\r\n  const handleCloseClientModal = () => {\r\n    setSelectedClient(null);\r\n    setIsClientModalOpen(false);\r\n  };\r\n\r\n  const handleOpenSubModal = (client) => {\r\n    const existingSub = subscriptions.find(sub => sub.clientId === client.id);\r\n    setSelectedClient(client);\r\n    setSelectedSubscription(existingSub || null);\r\n    setIsSubModalOpen(true);\r\n  };\r\n\r\n  const handleCloseSubModal = () => {\r\n    setSelectedClient(null);\r\n    setSelectedSubscription(null);\r\n    setIsSubModalOpen(false);\r\n  };\r\n\r\n  const handleSaveClient = async (clientData) => {\r\n    if (selectedClient) { // Update\r\n      const result = await clientService.update(selectedClient.id, clientData);\r\n      if (result.success) {\r\n        setClients(prev => prev.map(c => c.id === selectedClient.id ? { ...c, ...clientData } : c));\r\n        alert(MESSAGES.SUCCESS.CLIENT_UPDATED);\r\n      }\r\n    } else { // Create\r\n      const result = await clientService.create(clientData);\r\n      if (result.success) {\r\n        setClients(prev => [{ id: result.id, ...clientData }, ...prev]);\r\n        alert(MESSAGES.SUCCESS.CLIENT_CREATED);\r\n      }\r\n    }\r\n    handleCloseClientModal();\r\n  };\r\n\r\n  const handleDeleteClient = async (clientId) => {\r\n    if (window.confirm(MESSAGES.ERROR.DELETE_CONFIRMATION)) {\r\n      const result = await clientService.delete(clientId);\r\n      if (result.success) {\r\n        setClients(prev => prev.filter(c => c.id !== clientId));\r\n        alert(MESSAGES.SUCCESS.CLIENT_DELETED);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSaveSubscription = async (subData) => {\r\n    if (selectedSubscription) { // Update\r\n      const result = await subscriptionService.update(selectedSubscription.id, subData);\r\n      if (result.success) {\r\n        setSubscriptions(prev => prev.map(s => s.id === selectedSubscription.id ? { ...s, ...subData } : s));\r\n      }\r\n    } else { // Create\r\n      const result = await subscriptionService.create(subData);\r\n      if (result.success) {\r\n        setSubscriptions(prev => [{ id: result.id, ...subData }, ...prev]);\r\n      }\r\n    }\r\n    handleCloseSubModal();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-gray-800\">Gerenciar Clientes</h1>\r\n        <button\r\n          onClick={() => handleOpenClientModal()}\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n        >\r\n          Adicionar Cliente\r\n        </button>\r\n      </div>\r\n\r\n      <ClientTable\r\n        clients={clients}\r\n        onEdit={handleOpenClientModal}\r\n        onDelete={handleDeleteClient}\r\n        onManageSubscription={handleOpenSubModal}\r\n      />\r\n\r\n      <ClientModal\r\n        isOpen={isClientModalOpen}\r\n        onClose={handleCloseClientModal}\r\n        onSave={handleSaveClient}\r\n        client={selectedClient}\r\n      />\r\n\r\n      {selectedClient && (\r\n        <SubscriptionModal\r\n          isOpen={isSubModalOpen}\r\n          onClose={handleCloseSubModal}\r\n          onSave={handleSaveSubscription}\r\n          subscription={selectedSubscription}\r\n          client={selectedClient}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientsPage;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,SAASC,aAAa,EAAEC,mBAAmB,QAAQ,0BAA0B;AAC7E,SAASC,QAAQ,QAAQ,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,WAAW,GAAGA,CAAC;EAAEC,OAAO;EAAEC,UAAU;EAAEC,aAAa;EAAEC;AAAiB,CAAC,KAAK;EAAAC,EAAA;EAChF,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAACiB,cAAc,EAAEC,iBAAiB,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACmB,cAAc,EAAEC,iBAAiB,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACqB,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAEtE,MAAMuB,qBAAqB,GAAGA,CAACC,MAAM,GAAG,IAAI,KAAK;IAC/CJ,iBAAiB,CAACI,MAAM,CAAC;IACzBR,oBAAoB,CAAC,IAAI,CAAC;EAC5B,CAAC;EAED,MAAMS,sBAAsB,GAAGA,CAAA,KAAM;IACnCL,iBAAiB,CAAC,IAAI,CAAC;IACvBJ,oBAAoB,CAAC,KAAK,CAAC;EAC7B,CAAC;EAED,MAAMU,kBAAkB,GAAIF,MAAM,IAAK;IACrC,MAAMG,WAAW,GAAGf,aAAa,CAACgB,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,QAAQ,KAAKN,MAAM,CAACO,EAAE,CAAC;IACzEX,iBAAiB,CAACI,MAAM,CAAC;IACzBF,uBAAuB,CAACK,WAAW,IAAI,IAAI,CAAC;IAC5CT,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;EAED,MAAMc,mBAAmB,GAAGA,CAAA,KAAM;IAChCZ,iBAAiB,CAAC,IAAI,CAAC;IACvBE,uBAAuB,CAAC,IAAI,CAAC;IAC7BJ,iBAAiB,CAAC,KAAK,CAAC;EAC1B,CAAC;EAED,MAAMe,gBAAgB,GAAG,MAAOC,UAAU,IAAK;IAC7C,IAAIf,cAAc,EAAE;MAAE;MACpB,MAAMgB,MAAM,GAAG,MAAM/B,aAAa,CAACgC,MAAM,CAACjB,cAAc,CAACY,EAAE,EAAEG,UAAU,CAAC;MACxE,IAAIC,MAAM,CAACE,OAAO,EAAE;QAClB1B,UAAU,CAAC2B,IAAI,IAAIA,IAAI,CAACC,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACT,EAAE,KAAKZ,cAAc,CAACY,EAAE,GAAG;UAAE,GAAGS,CAAC;UAAE,GAAGN;QAAW,CAAC,GAAGM,CAAC,CAAC,CAAC;QAC3FC,KAAK,CAACnC,QAAQ,CAACoC,OAAO,CAACC,cAAc,CAAC;MACxC;IACF,CAAC,MAAM;MAAE;MACP,MAAMR,MAAM,GAAG,MAAM/B,aAAa,CAACwC,MAAM,CAACV,UAAU,CAAC;MACrD,IAAIC,MAAM,CAACE,OAAO,EAAE;QAClB1B,UAAU,CAAC2B,IAAI,IAAI,CAAC;UAAEP,EAAE,EAAEI,MAAM,CAACJ,EAAE;UAAE,GAAGG;QAAW,CAAC,EAAE,GAAGI,IAAI,CAAC,CAAC;QAC/DG,KAAK,CAACnC,QAAQ,CAACoC,OAAO,CAACG,cAAc,CAAC;MACxC;IACF;IACApB,sBAAsB,CAAC,CAAC;EAC1B,CAAC;EAED,MAAMqB,kBAAkB,GAAG,MAAOhB,QAAQ,IAAK;IAC7C,IAAIiB,MAAM,CAACC,OAAO,CAAC1C,QAAQ,CAAC2C,KAAK,CAACC,mBAAmB,CAAC,EAAE;MACtD,MAAMf,MAAM,GAAG,MAAM/B,aAAa,CAAC+C,MAAM,CAACrB,QAAQ,CAAC;MACnD,IAAIK,MAAM,CAACE,OAAO,EAAE;QAClB1B,UAAU,CAAC2B,IAAI,IAAIA,IAAI,CAACc,MAAM,CAACZ,CAAC,IAAIA,CAAC,CAACT,EAAE,KAAKD,QAAQ,CAAC,CAAC;QACvDW,KAAK,CAACnC,QAAQ,CAACoC,OAAO,CAACW,cAAc,CAAC;MACxC;IACF;EACF,CAAC;EAED,MAAMC,sBAAsB,GAAG,MAAOC,OAAO,IAAK;IAChD,IAAIlC,oBAAoB,EAAE;MAAE;MAC1B,MAAMc,MAAM,GAAG,MAAM9B,mBAAmB,CAAC+B,MAAM,CAACf,oBAAoB,CAACU,EAAE,EAAEwB,OAAO,CAAC;MACjF,IAAIpB,MAAM,CAACE,OAAO,EAAE;QAClBxB,gBAAgB,CAACyB,IAAI,IAAIA,IAAI,CAACC,GAAG,CAACiB,CAAC,IAAIA,CAAC,CAACzB,EAAE,KAAKV,oBAAoB,CAACU,EAAE,GAAG;UAAE,GAAGyB,CAAC;UAAE,GAAGD;QAAQ,CAAC,GAAGC,CAAC,CAAC,CAAC;MACtG;IACF,CAAC,MAAM;MAAE;MACP,MAAMrB,MAAM,GAAG,MAAM9B,mBAAmB,CAACuC,MAAM,CAACW,OAAO,CAAC;MACxD,IAAIpB,MAAM,CAACE,OAAO,EAAE;QAClBxB,gBAAgB,CAACyB,IAAI,IAAI,CAAC;UAAEP,EAAE,EAAEI,MAAM,CAACJ,EAAE;UAAE,GAAGwB;QAAQ,CAAC,EAAE,GAAGjB,IAAI,CAAC,CAAC;MACpE;IACF;IACAN,mBAAmB,CAAC,CAAC;EACvB,CAAC;EAED,oBACExB,OAAA;IAAAiD,QAAA,gBACEjD,OAAA;MAAKkD,SAAS,EAAC,wCAAwC;MAAAD,QAAA,gBACrDjD,OAAA;QAAIkD,SAAS,EAAC,kCAAkC;QAAAD,QAAA,EAAC;MAAkB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACxEtD,OAAA;QACEuD,OAAO,EAAEA,CAAA,KAAMxC,qBAAqB,CAAC,CAAE;QACvCmC,SAAS,EAAC,+DAA+D;QAAAD,QAAA,EAC1E;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAENtD,OAAA,CAACP,WAAW;MACVS,OAAO,EAAEA,OAAQ;MACjBsD,MAAM,EAAEzC,qBAAsB;MAC9B0C,QAAQ,EAAEnB,kBAAmB;MAC7BoB,oBAAoB,EAAExC;IAAmB;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1C,CAAC,eAEFtD,OAAA,CAACN,WAAW;MACViE,MAAM,EAAEpD,iBAAkB;MAC1BqD,OAAO,EAAE3C,sBAAuB;MAChC4C,MAAM,EAAEpC,gBAAiB;MACzBT,MAAM,EAAEL;IAAe;MAAAwC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxB,CAAC,EAED3C,cAAc,iBACbX,OAAA,CAACL,iBAAiB;MAChBgE,MAAM,EAAElD,cAAe;MACvBmD,OAAO,EAAEpC,mBAAoB;MAC7BqC,MAAM,EAAEf,sBAAuB;MAC/BgB,YAAY,EAAEjD,oBAAqB;MACnCG,MAAM,EAAEL;IAAe;MAAAwC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxB,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAChD,EAAA,CA5GIL,WAAW;AAAA8D,EAAA,GAAX9D,WAAW;AA8GjB,eAAeA,WAAW;AAAC,IAAA8D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}