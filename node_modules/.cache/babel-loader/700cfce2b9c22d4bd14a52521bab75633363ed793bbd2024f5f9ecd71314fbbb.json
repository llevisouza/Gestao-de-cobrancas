{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LEVI\\\\Desktop\\\\Gestao-de-cobrancas\\\\src\\\\components\\\\dashboard\\\\Dashboard.js\",\n  _s = $RefreshSig$();\n// src/components/dashboard/Dashboard.js\n\nimport React, { useState, useEffect } from 'react';\nimport { useFirestore } from '../../hooks/useFirestore';\nimport KPICards from './KPICards';\nimport InvoiceTable from './InvoiceTable';\nimport LoadingSpinner from '../common/LoadingSpinner';\nimport { formatCurrency } from '../../utils/formatters';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const {\n    clients,\n    subscriptions,\n    invoices,\n    loading,\n    createExampleData,\n    generateInvoicesForMonth\n  } = useFirestore();\n  const [kpis, setKpis] = useState({\n    totalClients: 0,\n    activeSubscriptions: 0,\n    monthlyRevenue: 0,\n    pendingInvoices: 0\n  });\n\n  // Calcular KPIs\n  useEffect(() => {\n    const activeSubsCount = subscriptions.filter(sub => sub.status === 'active').length;\n\n    // CORREÃ‡ÃƒO: Alterado de 'sub.value' para 'sub.amount'\n    const monthlyRev = subscriptions.filter(sub => sub.status === 'active').reduce((sum, sub) => sum + parseFloat(sub.amount || 0), 0);\n    const pendingInvs = invoices.filter(inv => inv.status === 'pending').length;\n    setKpis({\n      totalClients: clients.length,\n      activeSubscriptions: activeSubsCount,\n      monthlyRevenue: monthlyRev,\n      pendingInvoices: pendingInvs\n    });\n  }, [clients, subscriptions, invoices]);\n  const handleCreateExampleData = async () => {\n    try {\n      await createExampleData();\n      alert('Dados de exemplo criados com sucesso!');\n    } catch (error) {\n      console.error('Erro ao criar dados de exemplo:', error);\n      alert('Erro ao criar dados de exemplo: ' + error.message);\n    }\n  };\n  const handleGenerateInvoices = async () => {\n    try {\n      const currentMonth = new Date().getMonth() + 1;\n      const currentYear = new Date().getFullYear();\n      await generateInvoicesForMonth(currentMonth, currentYear);\n      alert('Faturas geradas com sucesso!');\n    } catch (error) {\n      console.error('Erro ao gerar faturas:', error);\n      alert('Erro ao gerar faturas: ' + error.message);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"dashboard-title\",\n          children: \"Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"dashboard-subtitle\",\n          children: \"Vis\\xE3o geral do sistema de cobran\\xE7as\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCreateExampleData,\n            className: \"btn btn-secondary\",\n            children: \"\\uD83D\\uDCCA Dados Exemplo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleGenerateInvoices,\n            className: \"btn btn-primary\",\n            children: \"\\uD83E\\uDDFE Gerar Faturas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(KPICards, {\n        kpis: kpis\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InvoiceTable, {\n        invoices: invoices,\n        clients: clients\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"/0RsbQdLoqa3xdUqDA2TKX4b/J8=\", false, function () {\n  return [useFirestore];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useFirestore","KPICards","InvoiceTable","LoadingSpinner","formatCurrency","jsxDEV","_jsxDEV","Dashboard","_s","clients","subscriptions","invoices","loading","createExampleData","generateInvoicesForMonth","kpis","setKpis","totalClients","activeSubscriptions","monthlyRevenue","pendingInvoices","activeSubsCount","filter","sub","status","length","monthlyRev","reduce","sum","parseFloat","amount","pendingInvs","inv","handleCreateExampleData","alert","error","console","message","handleGenerateInvoices","currentMonth","Date","getMonth","currentYear","getFullYear","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","_c","$RefreshReg$"],"sources":["C:/Users/LEVI/Desktop/Gestao-de-cobrancas/src/components/dashboard/Dashboard.js"],"sourcesContent":["// src/components/dashboard/Dashboard.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useFirestore } from '../../hooks/useFirestore';\r\nimport KPICards from './KPICards';\r\nimport InvoiceTable from './InvoiceTable';\r\nimport LoadingSpinner from '../common/LoadingSpinner';\r\nimport { formatCurrency } from '../../utils/formatters';\r\n\r\nconst Dashboard = () => {\r\n  const { \r\n    clients, \r\n    subscriptions, \r\n    invoices, \r\n    loading, \r\n    createExampleData,\r\n    generateInvoicesForMonth \r\n  } = useFirestore();\r\n\r\n  const [kpis, setKpis] = useState({\r\n    totalClients: 0,\r\n    activeSubscriptions: 0,\r\n    monthlyRevenue: 0,\r\n    pendingInvoices: 0\r\n  });\r\n\r\n  // Calcular KPIs\r\n  useEffect(() => {\r\n    const activeSubsCount = subscriptions.filter(sub => sub.status === 'active').length;\r\n    \r\n    // CORREÃ‡ÃƒO: Alterado de 'sub.value' para 'sub.amount'\r\n    const monthlyRev = subscriptions\r\n      .filter(sub => sub.status === 'active')\r\n      .reduce((sum, sub) => sum + parseFloat(sub.amount || 0), 0);\r\n    \r\n    const pendingInvs = invoices.filter(inv => inv.status === 'pending').length;\r\n    \r\n    setKpis({\r\n      totalClients: clients.length,\r\n      activeSubscriptions: activeSubsCount,\r\n      monthlyRevenue: monthlyRev,\r\n      pendingInvoices: pendingInvs\r\n    });\r\n  }, [clients, subscriptions, invoices]);\r\n\r\n  const handleCreateExampleData = async () => {\r\n    try {\r\n      await createExampleData();\r\n      alert('Dados de exemplo criados com sucesso!');\r\n    } catch (error) {\r\n      console.error('Erro ao criar dados de exemplo:', error);\r\n      alert('Erro ao criar dados de exemplo: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleGenerateInvoices = async () => {\r\n    try {\r\n      const currentMonth = new Date().getMonth() + 1;\r\n      const currentYear = new Date().getFullYear();\r\n      await generateInvoicesForMonth(currentMonth, currentYear);\r\n      alert('Faturas geradas com sucesso!');\r\n    } catch (error) {\r\n      console.error('Erro ao gerar faturas:', error);\r\n      alert('Erro ao gerar faturas: ' + error.message);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <div className=\"container\">\r\n        <div className=\"dashboard-header\">\r\n          <h1 className=\"dashboard-title\">Dashboard</h1>\r\n          <p className=\"dashboard-subtitle\">\r\n            VisÃ£o geral do sistema de cobranÃ§as\r\n          </p>\r\n          \r\n          <div className=\"dashboard-actions\">\r\n            <button \r\n              onClick={handleCreateExampleData}\r\n              className=\"btn btn-secondary\"\r\n            >\r\n              ðŸ“Š Dados Exemplo\r\n            </button>\r\n            <button \r\n              onClick={handleGenerateInvoices}\r\n              className=\"btn btn-primary\"\r\n            >\r\n              ðŸ§¾ Gerar Faturas\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <KPICards kpis={kpis} />\r\n        \r\n        <InvoiceTable invoices={invoices} clients={clients} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}